{% extends "main/base.html" %}
{% block title %}Search{% endblock %}
{% block content %}

{% if request.user.is_authenticated %}
<center>
    <h3>Results</h3>
</center>
{% if subjects %}
<h4>Subjects</h4>
<hr>
<div id="subject-container" class="container overflow-hidden text-center">
    <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
        {% for subject in subjects %}
        <div class="col-2">
            <div id="{{subject.id}}" class="card mb-3" style="max-width: 18rem;">
                <div class="card-header">
                    <h5><a href="{% url 'main:building' subject.id %}">{{subject|capfirst}}</a></h5>
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Classes: {{ subject.class_set.count }}
                        <br />
                        Faculty: {{ subject.teacher_set.count }}
                        <br />
                        Students: {{ subject.student_set.count }}
                    </h5>
                    <br>
                    <a href="{% url 'main:delete' subject.id 'subject' %}">
                        <button type="button" class="btn btn-outline-danger">Delete Subject</button>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% if classes %}
<h4>Classes</h4>
<hr>
<div id="class-container" class="container overflow-hidden text-center">
    <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
        {% for class in classes %}
        <div class="col-2">
            <div id="{{class.id}}" class="card mb-3" style="max-width: 18rem;">
                <div class="card-header">
                    <h5><a href="{% url 'main:class' class.name %}">{{class.name|capfirst}}</a></h5>
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Faculty: <a href="{% url 'main:teacher' class.teacher.id %}">{{ class.teacher }}</a>
                        <br />
                        Room {{ class.room }}
                        <br />
                        Students: {{ class.students.count }}
                    </h5>
                    <br>
                    <a href="{% url 'main:delete' class.id 'class' %}">
                        <button type="button" class="btn btn-outline-danger">Delete Class</button>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% if teachers %}
<h4>Teachers</h4>
<hr>
<div id="teacher-container" class="container overflow-hidden text-center">
    <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
        {% for teacher in teachers %}
        <div class="col-2">
            <div id="{{teacher.id}}" class="card mb-3" style="max-width: 18rem;">
                <div class="card-header">
                    <h5><a href="{% url 'main:teacher' teacher.id %}">{{teacher|title}}</a></h5>
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        Specialization: {{teacher.subject}}
                        <br />
                        Skill: {{teacher.skill}}
                        <br />
                        Salary: {{teacher.salary}}
                    </h5>
                    <br>
                    <a href="{% url 'main:delete' teacher.id 'teacher' %}">
                        <button type="button" class="btn btn-outline-danger">Delete Teacher</button>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{% if students %}
<h4>Students</h4>
<hr>
<div id="student-container" class="container overflow-hidden text-center">
    <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
        {% for student in students %}
        <div class="col-2">
            <div id="{{teacher.id}}" class="card mb-3" style="max-width: 18rem;">
                <div class="card-header">
                    <h5><a href="{% url 'main:student' student.id %}">{{student|title}}</a></h5>
                </div>
                <div class="card-body">
                    <h5 class="card-title">
                        {{student.getYear}}
                        <br>
                        Major: {{student.major}}
                    </h5>
                    <br>
                    <a href="{% url 'main:delete' student.id 'student' %}">
                        <button type="button" class="btn btn-outline-danger">Delete Class</button>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endif %}

{% endblock %}